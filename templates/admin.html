{% extends "layout.html" %}

{% block contentrow1col1 %}

{% if session.username and session.role == 'admin' %}

<H1>Welcome admin!</H1>

<H2>Your quizzes</H2>

{% if not dict_quizzes %}

<p>{{ message }}</p>
<p><a class="btn btn-primary" href="/newquiz" role="button">Create new quiz</a></p>

{% else %}

<p><a class="btn btn-primary" href="/newquiz" role="button">Create new quiz</a></p>

{% for quiz_label, quiz in dict_quizzes.items() %}
    <h4>Name: {{ quiz_label }}</h4>
    <H6>Published: {{ quiz.published }}</h6>
    <h6>Published at: {{ quiz.published_at }}</h6>

    {% for question_label, question in quiz.questions.items() %}
        <p>Question: {{ question_label }}</p>

        <ul>
        {% for option in question.options %}
            <li>
            <p>Option: {{ option.option_label }} ({{ option.correct_option }})</p>
            </li>
        {% endfor %}
        </ul>

    {% endfor %}
    <p><a class="btn btn-primary" href="/adminquiz/{{ quiz.quiz_id }}" role="button">Set correct options and publish quiz</a></p>
    

{% endfor %}

{% endif %}

<H3>Stats of your quizzes: how many users, results</H3>
Stats stats stats<br>

<a class="btn btn-danger" href="/accountremoved" role="button">Remove your account</a>


{% else %}
<p><a class="btn btn-primary" href="/login" role="button">Login</a></p>


{% endif %}


{% endblock %}

{% block contentrow1col2 %}

<h1>Your quizzes played</h1>
<table class="table">
    <thead>
      <tr>
        <th scope="col">Quiz name</th>
        <th scope="col">Played</th>
      </tr>
    </thead>
    <tbody>
      {% for row in own_quizzes %}
      <tr>
        <td>{{ row.quiz_label }}</td>
        <td>{{ row.played_quizzes_count / 5}}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

{% if not correct_answers %}

<H3>Correct answers</H3>

<div class="alert alert-primary" role="alert">
    Your all time correct answers: {{ message2 }}
</div>

{% else %}

<H3>Correct answers</H3>

<div class="alert alert-primary" role="alert">
    Your all time correct answers: {{ correct_answers[0][1] }}
</div>

{% endif %}

{% if not correct_answers %}

<H3>Played quizzes</H3>

<div class="alert alert-primary" role="alert">
    Your all time played quizzes: {{ message2 }}
</div>

{% else %}

<H3>Played quizzes</H3>

<div class="alert alert-primary" role="alert">
    Your all time played quizzes: {{ played_quizzes[0][1] }}
</div>

{% endif %}

{% endblock %}